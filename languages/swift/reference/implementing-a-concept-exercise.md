# How to implement a Swift concept exercise

This document describes how to implement a concept exercise for the Swift track.

**Please please please read the docs before starting.** Posting PRs without reading these docs will be a lot more frustrating for you during the review cycle, and exhaust Exercism's maintainers' time. So, before diving into the implementation, please read the following documents:

- [The features of v3][docs-features-of-v3].
- [Rationale for v3][docs-rationale-for-v3].
- [What are concept exercises and how are they structured?][docs-concept-exercises]

Please also watch the following video:

- [The Anatomy of a Concept Exercise][anatomy-of-a-concept-exercise].

As this document is generic, the following placeholders are used:

- `<SLUG>`: the name of the exercise in kebab-case (e.g. `property-observers`).
- `<NAME>`: the name of the exercise in PascalCase (e.g. `PropertyObservers`).

Before implementing the exercise, please make sure you have a good understanding of what the exercise should be teaching (and what not). This information can be found in the exercise's GitHub issue. <!--Having done this, please read the [Swift concept exercises introduction][concept-exercises].-->

To implement a concept exercise, the following files must be added:

<pre>
languages
└── swift
    └── exercises
        └── concept
            └── &lt;SLUG&gt;
                ├── .docs
                |   ├── after.md
                |   ├── instructions.md
                |   ├── introduction.md
                |   ├── hints.md
                |   └── source.md (required if there are third-party sources)
                ├── .meta
                |   |── config.json
                |   |── design.md
                |   └── Example.swift
                ├── Package.swift
                ├── Sources
                |   └── &lt;NAME&gt;
                |       └── &lt;NAME&gt;.swift
                └── Tests
                    |── LinuxMain.swift
                    └── &lt;NAME&gt;Tests
                        |── XCTestManifests.swift
                        └── &lt;NAME&gt;Tests.swift

</pre>

## Step 1: Add code files

The code files are track-specific and should be designed to help the student learn the exercise's concepts. The following Swift code files must be added:

### Add `Package.swift` file

**Purpose:** The project file required to build the project and run the tests. This file will be generated by swift package manager and should not need modification.

<!--For more information, check [this example project file][example-project-file].
-->

### Add `Sources/<NAME>/<NAME>.swift` file

**Purpose:** Provide a stub implementation. This file will be generated by swift package manager and will need modification.

- The stub implementation's code should compile. The only exception is for exercises that introduce syntax we _want_ a student to define themselves, like how to define a class or property. In this case, insert a descriptive TODO comment instead of providing stub code <!--(see [this example][todo]-->).
- Stub methods and functions should throw a `fatalError("<method name> not implemented")` error. <!--See [this instance method example][not-implemented].--> The message is subtly different for stub type methods and should include the `static` or `class` keywords in the message <!--, see [this static method example][not-implemented-static]-->.

For more information, please read [this in-depth description][stub-file], [watch this video][video-stub-file] and check [this example stub file][example-stub-file].

### Add `Tests/LinuxMain.swift` file

**Purpose:** A file required to run the test suite on Linux. This file will be generated by swift package manager and should not need modification.

### Add `Tests/<NAME>Tests/XCTestManifests.swift` file

**Purpose:** A file required to run the test suite on macOS. This file will be generated by swift package manager and should not need modification.

### Add `Tests/<NAME>Tests/<NAME>Tests.swift` file

**Purpose:** The test suite to verify a solution's correctness. This file will be generated by swift package manager and _will_ need modification.

- [XCTest][xctest] is used as the test framework.
- All but the first test should be skipped by default<!-- (check [this example][skip-fact])-->.
- Test methods must be named using `lowerCamelCase`, with the name of the test begining with `test`<!-- (check [this example][test-name])-->.
- Test methods may have multiple assertions, but must be written so that only a single assertion may be tripped per test.
- Test methods must not use force unwrapping of optional values.
- All of the tests must be added to the type property `allTests`.

For more information, please read [this in-depth description][tests-file], [watch this video][video-tests-file] and check [this example tests file][example-tests-file].

### Remove `README.md` file

This file will be generated by the Swift Package Manager, but it needs to be removed as it conflicts with a README.md file that will be generated for the student when they attempt the exercise.

### Add `.meta/Example.swift` file

**Purpose:** The idiomatic example implementation that passes all the tests.

For more information, please read [this in-depth description][example-file], [watch this video][video-example-file] and check [this example file][example-example-file].

Note that all of the above files except for .meta/Example.swift can be created automatically by running `swift package init --type library --&lt;NAME&gt;` inside the &lt;SLUG&gt; directory.

## Step 2: Add documentation files

How to create the files common to all tracks is described in the [how to implement a concept exercise document][how-to-implement-a-concept-exercise].

## Step 3: Update list of implemented exercises

- Add the exercise to the list of implemented exercises<!--[list of implemented exercises][implemented-exercises]-->.

## Step 4: format code

All Swift code should be formatted using the [`swift-format`][swift-format] tool. Swift-format is also available for macOS and Linux via [Homebrew][homebrew].

To run swift-format, open a command prompt in the directorycontaining the file you wish to format and then run:

- `swift-format format -i <file-name>.swift`.

To just check the file for errors, but not reformat it, run `swift-format lint <file-name>.swift` instead.

## Step 5: Add analyzer (optional)

Some exercises could benefit from having an exercise-specific analyzer<!--[analyzer][analyzer]-->. If so, specify what analysis rules should be applied to this exercise and why.

_Skip this step if you're not sure what to do._

## Step 6: Add representation (optional)

Some exercises could benefit from having an custom representation as generated by the Swift representer (yet to be written)<!-- [Swift representer][representer]-->. If so, specify what changes to the representation should be applied and why.

_Skip this step if you're not sure what to do._

<!--
## Inspiration

When implementing an exercise, it can be very useful to look at already implemented Swift exercises like the [strings][concept-exercise-strings], [datetimes][concept-exercise-datetimes] or [floating-point numbers][concept-exercise-numbers-floating-point] exercises. You can also check the exercise's [general concepts documents][reference] to see if other languages have already implemented an exercise for that concept.
-->

## Help

If you have any questions regarding implementing the exercise, please post them as comments in the exercise's GitHub issue.

<!--[analyzer]: https://github.com/exercism/csharp-analyzer
[representer]: https://github.com/exercism/csharp-representer
-->

<!--[concept-exercises]: ../exercises/concept/README.md
[implemented-exercises]: ../exercises/concept/README.md#implemented-exercises
-->

<!--[concept-exercise-strings]: ../exercises/concept/strings
[concept-exercise-dates]: ../exercises/concept/dates
[concept-exercise-numbers-floating-point]: ../exercises/concept/floating-point-numbers
-->

<!--[example-stub-file]: ../exercises/concept/strings/Source/Strings/Strings.swift
[example-tests-file]: ../exercises/concept/strings/Tests/StringsTests/StringTests.swift
[example-example-file]: ../exercises/concept/strings/.meta/Example.swift
[example-project-file]: ../exercises/concept/strings/Package.swift
-->

[how-to-implement-a-concept-exercise]: ../../../docs/maintainers/generic-how-to-implement-a-concept-exercise.md
[docs-concept-exercises]: ../../../docs/concept-exercises.md
[docs-rationale-for-v3]: ../../../docs/rationale-for-v3.md
[docs-features-of-v3]: ../../../docs/features-of-v3.md
[anatomy-of-a-concept-exercise]: https://www.youtube.com/watch?v=gkbBqd7hPrA
[reference]: ../../../reference
[swift-format]: https://github.com/apple/swift-format
[allowing-fork-pr-changes]: https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/allowing-changes-to-a-pull-request-branch-created-from-a-fork
[video-stub-file]: https://www.youtube.com/watch?v=gkbBqd7hPrA&t=1171
[video-tests-file]: https://www.youtube.com/watch?v=gkbBqd7hPrA&t=1255
[video-example-file]: https://www.youtube.com/watch?v=gkbBqd7hPrA&t=781
[homebrew]: https://brew.sh
[xctest]: https://developer.apple.com/documentation/xctest

<!--[skip-test]: ../exercises/concept/strings/Tests/StringsTests/StringTests.swift#L11
[test-name]: ../exercises/concept/strings/Tests/StringsTests/StringTests.swift#L24
-->

<!--[not-implemented-static]: ../exercises/concept/arrays/Arrays.cs#L12
[not-implemented]: ../exercises/concept/arrays/Arrays.cs#L17
-->

<!--[todo]: ../exercises/concept/basics/Sources/Basics/Basics.swift
-->

[stub-file]: ../../../docs/concept-exercises.md#stub-implementation-file
[tests-file]: ../../../docs/concept-exercises.md#tests-file
[example-file]: ../../../docs/concept-exercises.md#example-implementation-file
[video-stub-file]: https://www.youtube.com/watch?v=gkbBqd7hPrA&t=1171
[video-tests-file]: https://www.youtube.com/watch?v=gkbBqd7hPrA&t=1255
[video-example-file]: https://www.youtube.com/watch?v=gkbBqd7hPrA&t=781
